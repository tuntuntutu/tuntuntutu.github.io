## 需求
在modal弹层中有个搜索列表，需要对弹层中的列表进行搜索。类似效果如下：

![image](http://haitao.nos.netease.com/b508afd7-881f-4d72-8ff6-3017c2cdb9b6.png)

## 问题

一般弹层都是用fixed来做的，而不同的浏览器在实现键盘弹出和收起的时候会有自己的一些策略。
### 一些异常现象：

#### 微信、safari(WKwebview): 
    
弹出键盘：整个页面被推到最顶部，fixed的dom元素和键盘一起从底部弹出。会有个fixed元素消失的假象。类似于在键盘做弹出，收起的时候fixed的元素会被绝对定位的方式移到页面的某个位置。等到键盘动作结束了再移回到原先位置，重新变成fixed的元素。

收起键盘：通过键盘的完成收起键盘，键盘收起动作结束之后fixed的元素会闪一下。不通过点击键盘的完成按钮收起键盘，整个fixed的dom元素会先被移到键盘上面。然后等键盘收起动作完成了之后再立即回到之前fixed的位置。


    
#### 安卓

键盘弹出的时候会把fixed在页面底部的元素网上推（fixed在顶部的不会），因为搜索列表在弹窗中比较长，一般都超过页面的一半高度。所以在input搜索框被推倒一个看不到的位置。
    

## 解决方案

### 售后弹窗中的解决方案

弹窗文件：aftersaleprdmodal.js。建议联系代码看：

1. 初始化弹窗的时候用fixed的方式展示弹窗，弹窗的内容用绝对定位bottom:0px;到弹窗底部。
2. 初始话完毕，用js计算出弹窗内容距离顶部的距离。用绝对定位top:xx;定位（这里解决安卓机把整个弹窗往上推，遮住input框的情况）。
3. 弹层由fixed定位的方式改为absolute定位，js算出弹层所处的具体位置。absolute元素内的input框键盘弹出和收起正常。此时absolute元素会有小幅度的移动。(解决ios下弹层闪动问题)
4. 为了保证键盘弹出和收起的位置准确性，可以input框失去焦点和获得焦点的时候都做一次弹窗的位置矫正。